const __vite__mapDeps=(i,m=__vite__mapDeps,d=(m.f||(m.f=["assets/index-GJcepxju.js","assets/graph_model-BrF80QgO.js","assets/react-vendor-CViWwmvK.js","assets/handpose.esm-Ul5W6WHL.js"])))=>i.map(i=>d[i]);
import{_ as E,j as d}from"./three-vendor-BEm1ogwd.js";import{g as k,r as b,c as A}from"./react-vendor-CViWwmvK.js";import{d as L}from"./gestureDetection-BqmurZJO.js";import{m as P}from"./animation-vendor-D0pVqMMr.js";import{C as R}from"./SignLanguageMode-BAoXcIxi.js";import{c as T}from"./index-Lj9jGcDQ.js";import"./chart-vendor-CcQOYnKF.js";/**
 * @license lucide-react v0.303.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const W=T("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);var N={exports:{}};(function(_,U){(function(y,x){_.exports=x(b)})(A,function(S){return function(y){var x={};function u(i){if(x[i])return x[i].exports;var s=x[i]={i,l:!1,exports:{}};return y[i].call(s.exports,s,s.exports,u),s.l=!0,s.exports}return u.m=y,u.c=x,u.d=function(i,s,v){u.o(i,s)||Object.defineProperty(i,s,{enumerable:!0,get:v})},u.r=function(i){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(i,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(i,"__esModule",{value:!0})},u.t=function(i,s){if(s&1&&(i=u(i)),s&8||s&4&&typeof i=="object"&&i&&i.__esModule)return i;var v=Object.create(null);if(u.r(v),Object.defineProperty(v,"default",{enumerable:!0,value:i}),s&2&&typeof i!="string")for(var j in i)u.d(v,j,(function(w){return i[w]}).bind(null,j));return v},u.n=function(i){var s=i&&i.__esModule?function(){return i.default}:function(){return i};return u.d(s,"a",s),s},u.o=function(i,s){return Object.prototype.hasOwnProperty.call(i,s)},u.p="",u(u.s="./src/react-webcam.tsx")}({"./src/react-webcam.tsx":function(y,x,u){u.r(x);var i=u("react"),s=function(){var c=function(n,e){return c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,o){t.__proto__=o}||function(t,o){for(var r in o)o.hasOwnProperty(r)&&(t[r]=o[r])},c(n,e)};return function(n,e){c(n,e);function t(){this.constructor=n}n.prototype=e===null?Object.create(e):(t.prototype=e.prototype,new t)}}(),v=function(){return v=Object.assign||function(c){for(var n,e=1,t=arguments.length;e<t;e++){n=arguments[e];for(var o in n)Object.prototype.hasOwnProperty.call(n,o)&&(c[o]=n[o])}return c},v.apply(this,arguments)},j=function(c,n){var e={};for(var t in c)Object.prototype.hasOwnProperty.call(c,t)&&n.indexOf(t)<0&&(e[t]=c[t]);if(c!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,t=Object.getOwnPropertySymbols(c);o<t.length;o++)n.indexOf(t[o])<0&&Object.prototype.propertyIsEnumerable.call(c,t[o])&&(e[t[o]]=c[t[o]]);return e};(function(){typeof window>"u"||(navigator.mediaDevices===void 0&&(navigator.mediaDevices={}),navigator.mediaDevices.getUserMedia===void 0&&(navigator.mediaDevices.getUserMedia=function(n){var e=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia;return e?new Promise(function(t,o){e.call(navigator,n,t,o)}):Promise.reject(new Error("getUserMedia is not implemented in this browser"))}))})();function w(){return!!(navigator.mediaDevices&&navigator.mediaDevices.getUserMedia)}var C=function(c){s(n,c);function n(e){var t=c.call(this,e)||this;return t.canvas=null,t.ctx=null,t.requestUserMediaId=0,t.unmounted=!1,t.state={hasUserMedia:!1},t}return n.prototype.componentDidMount=function(){var e=this,t=e.state,o=e.props;if(this.unmounted=!1,!w()){o.onUserMediaError("getUserMedia not supported");return}t.hasUserMedia||this.requestUserMedia(),o.children&&typeof o.children!="function"&&console.warn("children must be a function")},n.prototype.componentDidUpdate=function(e){var t=this.props;if(!w()){t.onUserMediaError("getUserMedia not supported");return}var o=JSON.stringify(e.audioConstraints)!==JSON.stringify(t.audioConstraints),r=JSON.stringify(e.videoConstraints)!==JSON.stringify(t.videoConstraints),h=e.minScreenshotWidth!==t.minScreenshotWidth,f=e.minScreenshotHeight!==t.minScreenshotHeight;(r||h||f)&&(this.canvas=null,this.ctx=null),(o||r)&&(this.stopAndCleanup(),this.requestUserMedia())},n.prototype.componentWillUnmount=function(){this.unmounted=!0,this.stopAndCleanup()},n.stopMediaStream=function(e){e&&(e.getVideoTracks&&e.getAudioTracks?(e.getVideoTracks().map(function(t){e.removeTrack(t),t.stop()}),e.getAudioTracks().map(function(t){e.removeTrack(t),t.stop()})):e.stop())},n.prototype.stopAndCleanup=function(){var e=this.state;e.hasUserMedia&&(n.stopMediaStream(this.stream),e.src&&window.URL.revokeObjectURL(e.src))},n.prototype.getScreenshot=function(e){var t=this,o=t.state,r=t.props;if(!o.hasUserMedia)return null;var h=this.getCanvas(e);return h&&h.toDataURL(r.screenshotFormat,r.screenshotQuality)},n.prototype.getCanvas=function(e){var t=this,o=t.state,r=t.props;if(!this.video||!o.hasUserMedia||!this.video.videoHeight)return null;if(!this.ctx){var h=this.video.videoWidth,f=this.video.videoHeight;if(!this.props.forceScreenshotSourceSize){var l=h/f;h=r.minScreenshotWidth||this.video.clientWidth,f=h/l,r.minScreenshotHeight&&f<r.minScreenshotHeight&&(f=r.minScreenshotHeight,h=f*l)}this.canvas=document.createElement("canvas"),this.canvas.width=(e==null?void 0:e.width)||h,this.canvas.height=(e==null?void 0:e.height)||f,this.ctx=this.canvas.getContext("2d")}var m=this,p=m.ctx,a=m.canvas;return p&&a&&(a.width=(e==null?void 0:e.width)||a.width,a.height=(e==null?void 0:e.height)||a.height,r.mirrored&&(p.translate(a.width,0),p.scale(-1,1)),p.imageSmoothingEnabled=r.imageSmoothing,p.drawImage(this.video,0,0,(e==null?void 0:e.width)||a.width,(e==null?void 0:e.height)||a.height),r.mirrored&&(p.scale(-1,1),p.translate(-a.width,0))),a},n.prototype.requestUserMedia=function(){var e=this,t=this.props,o=function(f,l){var m={video:typeof l<"u"?l:!0};t.audio&&(m.audio=typeof f<"u"?f:!0),e.requestUserMediaId++;var p=e.requestUserMediaId;navigator.mediaDevices.getUserMedia(m).then(function(a){e.unmounted||p!==e.requestUserMediaId?n.stopMediaStream(a):e.handleUserMedia(null,a)}).catch(function(a){e.handleUserMedia(a)})};if("mediaDevices"in navigator)o(t.audioConstraints,t.videoConstraints);else{var r=function(f){return{optional:[{sourceId:f}]}},h=function(f){var l=f.deviceId;return typeof l=="string"?l:Array.isArray(l)&&l.length>0?l[0]:typeof l=="object"&&l.ideal?l.ideal:null};MediaStreamTrack.getSources(function(f){var l=null,m=null;f.forEach(function(g){g.kind==="audio"?l=g.id:g.kind==="video"&&(m=g.id)});var p=h(t.audioConstraints);p&&(l=p);var a=h(t.videoConstraints);a&&(m=a),o(r(l),r(m))})}},n.prototype.handleUserMedia=function(e,t){var o=this.props;if(e||!t){this.setState({hasUserMedia:!1}),o.onUserMediaError(e);return}this.stream=t;try{this.video&&(this.video.srcObject=t),this.setState({hasUserMedia:!0})}catch{this.setState({hasUserMedia:!0,src:window.URL.createObjectURL(t)})}o.onUserMedia(t)},n.prototype.render=function(){var e=this,t=this,o=t.state,r=t.props,h=r.audio;r.forceScreenshotSourceSize;var f=r.disablePictureInPicture;r.onUserMedia,r.onUserMediaError,r.screenshotFormat,r.screenshotQuality,r.minScreenshotWidth,r.minScreenshotHeight,r.audioConstraints,r.videoConstraints,r.imageSmoothing;var l=r.mirrored,m=r.style,p=m===void 0?{}:m,a=r.children,g=j(r,["audio","forceScreenshotSourceSize","disablePictureInPicture","onUserMedia","onUserMediaError","screenshotFormat","screenshotQuality","minScreenshotWidth","minScreenshotHeight","audioConstraints","videoConstraints","imageSmoothing","mirrored","style","children"]),M=l?v(v({},p),{transform:(p.transform||"")+" scaleX(-1)"}):p,O={getScreenshot:this.getScreenshot.bind(this)};return i.createElement(i.Fragment,null,i.createElement("video",v({autoPlay:!0,disablePictureInPicture:f,src:o.src,muted:!h,playsInline:!0,ref:function(I){e.video=I},style:M},g)),a&&a(O))},n.defaultProps={audio:!1,disablePictureInPicture:!1,forceScreenshotSourceSize:!1,imageSmoothing:!0,mirrored:!1,onUserMedia:function(){},onUserMediaError:function(){},screenshotFormat:"image/webp",screenshotQuality:.92},n}(i.Component);x.default=C},react:function(y,x){y.exports=S}}).default})})(N);var q=N.exports;const G=k(q),B=({isActive:_,onTextDetected:U})=>{const S=b.useRef(null),[y,x]=b.useState(!1),[u,i]=b.useState(!1),[s,v]=b.useState(null),[j,w]=b.useState(0),[C,c]=b.useState(null),[n,e]=b.useState(""),t=b.useRef(null);b.useEffect(()=>(_?o():h(),()=>{h()}),[_]);const o=async()=>{try{c(null);const a=await E(()=>import("./index-GJcepxju.js"),__vite__mapDeps([0,1,2])),g=await E(()=>import("./handpose.esm-Ul5W6WHL.js"),__vite__mapDeps([3,1,2]));await a.ready(),await g.load(),x(!0),i(!0),r()}catch(a){console.error("Error loading hand detection model:",a),c("Failed to load hand detection model. Please refresh and try again.")}},r=()=>{t.current||(t.current=setInterval(async()=>{S.current&&S.current.video&&S.current.video.readyState===4&&await f()},500))},h=()=>{t.current&&(clearInterval(t.current),t.current=null),i(!1)},f=async()=>{var a;try{const g=(a=S.current)==null?void 0:a.video;if(!g)return;const M=await L(g);if(M){if(v(M.gesture),w(M.confidence),M.confidence>.7&&M.gesture!==" "){const O=n+M.gesture;e(O),U(O)}}else v(null),w(0)}catch(g){console.error("Hand detection error:",g)}},l=()=>{e(""),U("")},m=()=>{const a=n+" ";e(a),U(a)},p=()=>{const a=n.slice(0,-1);e(a),U(a)};return d.jsxs("div",{className:"space-y-3",children:[d.jsxs("div",{className:"relative",children:[d.jsxs("div",{className:`relative overflow-hidden rounded-lg border-2 transition-all duration-300 ${s?"border-green-500 shadow-lg shadow-green-500/30":"border-white/10"}`,children:[d.jsx(G,{ref:S,audio:!1,screenshotFormat:"image/jpeg",className:"w-full h-48 object-cover bg-dark-800",videoConstraints:{width:640,height:480,facingMode:"user"},onUserMediaError:a=>{console.error("Webcam error:",a),c("Unable to access camera. Please check permissions.")}}),!y&&d.jsxs("div",{className:"absolute inset-0 bg-dark-900/90 flex flex-col items-center justify-center",children:[d.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-primary-400 mb-3"}),d.jsx("p",{className:"text-sm text-gray-400",children:"Loading hand detection model..."})]}),y&&u&&d.jsxs(P.div,{animate:{opacity:[.5,1,.5]},transition:{duration:2,repeat:1/0},className:"absolute top-3 left-3 flex items-center space-x-2 px-3 py-1.5 bg-green-500/20 rounded-full border border-green-500/30",children:[d.jsx(R,{className:"w-4 h-4 text-green-400"}),d.jsx("span",{className:"text-xs text-green-400 font-medium",children:"Detecting"})]}),s&&d.jsx(P.div,{initial:{scale:0},animate:{scale:1},className:"absolute top-3 right-3 px-4 py-2 bg-green-500/90 rounded-lg",children:d.jsxs("div",{className:"text-center",children:[d.jsx("div",{className:"text-2xl font-bold text-white",children:s}),d.jsxs("div",{className:"text-xs text-white/80",children:[Math.round(j*100),"% confident"]})]})}),y&&!s&&d.jsx("div",{className:"absolute bottom-3 left-1/2 transform -translate-x-1/2 px-3 py-1.5 bg-dark-900/80 rounded-full",children:d.jsx("p",{className:"text-xs text-gray-400",children:"Show hand gesture to camera"})})]}),C&&d.jsxs(P.div,{initial:{opacity:0,y:-10},animate:{opacity:1,y:0},className:"mt-2 flex items-start space-x-2 p-3 bg-red-500/10 border border-red-500/30 rounded-lg",children:[d.jsx(W,{className:"w-5 h-5 text-red-400 flex-shrink-0 mt-0.5"}),d.jsx("p",{className:"text-sm text-red-400",children:C})]})]}),d.jsxs("div",{className:"flex items-center space-x-2",children:[d.jsx("button",{onClick:m,className:"flex-1 px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-sm hover:bg-white/10 transition-colors",children:"Add Space"}),d.jsx("button",{onClick:p,className:"flex-1 px-3 py-2 bg-white/5 border border-white/10 rounded-lg text-sm hover:bg-white/10 transition-colors",disabled:!n,children:"Delete Last"}),d.jsx("button",{onClick:l,className:"flex-1 px-3 py-2 bg-red-500/10 border border-red-500/30 text-red-400 rounded-lg text-sm hover:bg-red-500/20 transition-colors",disabled:!n,children:"Clear All"})]}),d.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[d.jsxs("span",{children:["Model: ",y?"Loaded ✓":"Loading..."]}),d.jsxs("span",{children:["Characters: ",n.length]})]})]})};export{B as default};
